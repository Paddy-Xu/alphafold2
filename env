
git clone --branch v3.3.0 --single-branch https://github.com/soedinglab/hh-suite.git  hh-suite \
    && mkdir  hh-suite/build \
    && pushd  hh-suite/build \
    && cmake  -DCMAKE_POLICY_VERSION_MINIMUM=3.5  -DCMAKE_INSTALL_PREFIX=hhsuite .. \
    &&  make -j &&  make install \
    && sudo ln -s /opt/hhsuite/bin/* /usr/local/bin/ \
    && popd \
    && rm -rf /tmp/hh-suite



brew install kalign
brew install jackhmmer


# Install Miniconda package manager.
RUN wget -q -P /tmp \
  https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh \
    && bash /tmp/Miniconda3-latest-Linux-x86_64.sh -b -p /opt/conda \
    && rm /tmp/Miniconda3-latest-Linux-x86_64.sh

wget -q -P alphafold/common/ \
  https://git.scicore.unibas.ch/schwede/openstructure/-/raw/7102c63615b64735c4941278d92b554ec94415f8/modules/mol/alg/src/stereo_chemical_props.txt


conda create -n af2_local python==3.11
conda install --quiet --yes --channel conda-forge openmm=8.0.0 pdbfixer
conda clean --all --force-pkgs-dirs --yes

    && conda install --quiet --yes --channel nvidia cuda=${CUDA_VERSION} \

pip3 install --upgrade pip --no-cache-dir
pip3 install -r requirements.txt --no-cache-dir


pip3 install --upgrade --no-cache-dir \
      jaxlib==0.4.26

 pip3 install --upgrade --no-cache-dir      cuda12.cudnn89 \
      -f https://storage.googleapis.com/jax-releases/jax_cuda_releases.html

